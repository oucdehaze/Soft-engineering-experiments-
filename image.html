<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link ref="js" href="js.js">
    <script type="text/javascript" src="jquery-3.0.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <link href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <title></title>
</head>

<body>
    <!-- 1介绍网页-->
    <div class="container_new">
        <!-- 导航栏 -->
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <!-- 固定容器 -->
            <div class="navcontainer">
                <a class="navbar-brand" style="font-family:kaiti; color:rgba(149, 49, 212, 0.703); font-size: 2vw;">欢迎使用图像修复功能</a>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav">
                        <!-- active激活的 -->
                        <!-- 点击后跳转登录界面 -->
                        <li class="nav-item">
                            <button class="login-button" onclick="document.getElementById('log').style.display='block'">登录</button>
                        </li>
                        <!-- 注册 -->
                        <li class="nav-item">
                            <button class="register-button" onclick="document.getElementById('res').style.display='block'">注册</button>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
                    
        <div id="header" style="text-align: center; position: relative; top: 15vh; ">
            <!--<p style="font-size: 50px;color: black;"></p>-->
            <span id="htext" style="font-size: 7vw;font-family: STXingKai; font-weight:lighter; color: rgba(149, 49, 212, 0.703);">图片修复</span>
        </div>
         <div class="mytext">
                <p class="headertext" style="font-size: 2.5vw;font-family: STXingKai; color: rgba(149, 49, 212, 0.703);">去雾功能能够加强对比、增大反差、提高色彩</p>
                <p class="headertext" style="font-size: 2.5vw;font-family: STXingKai; color: rgba(149, 49, 212, 0.703);">饱和度，强调图片层次感，有效解决照片中的起雾现象。</p>         
            </div>
        <div class="footer">
            <img src="/jiantou.png" alt="箭头" class="jiantou">
            <button id="slideButton" style="width:2vw;margin-left: 49vw;" onclick="goToPage();">滑动</button>
        </div>
    </div>

    <!-- 2效果展示-->
    <script type="text/javascript">
        $().ready(function () {
            if (document.getElementById('a').value == 1) {
                $(".nav-tabs>li").eq(0).addClass("active");
                $(".nav-tabs>li").eq(1).removeClass("active");
                $("#choice1").addClass("tab-pane fade in active");
                $("#choice2").removeClass("tab-pane fade in active").addClass("tab-pane fade");
            }
            else if (document.getElementById('b').value == 2) {
                $(".nav-tabs>li").eq(1).addClass("active");
                $(".nav-tabs>li").eq(0).removeClass("active");
                $("#choice2").addClass("tab-pane fade in active");
                $("#choice1").removeClass("tab-pane fade in active").addClass("tab-pane fade");
            }
            else {
                $(".nav-tabs>li").eq(0).addClass("active");
                $(".nav-tabs>li").eq(1).removeClass("active");
                $("#choice1").addClass("tab-pane fade in active");
                $("#choice2").removeClass("tab-pane fade in active").addClass("tab-pane fade");
            }
            $("html,body").animate({ scrollTop: $("#title").offset().top }, 0);
        });
        function goToPage() {
            $("html,body").animate({ scrollTop: $("#title").offset().top }, 500);//定位到《静夜思》
        }
    </script>
    <!--轮播-->
    <div class="container2">
        
    </div>
    <!--功能实现-->
    <div class="container2">
        <script color="255,182,193" opacity="1" zindex="-1" count="100" src="https://cdn.bootcss.com/canvas-nest.js/2.0.4/canvas-nest.js" type="text/javascript"></script>
        <div id="header"  style="position: relative; top: 5vh;">
            <p class="headertext">立即体验</p>
        </div>
        <p id="title"></p><!--新增-->
        <ul id="myTab" class="nav nav-tabs">
            <li>
                <a style="font-size: large;" href="#choice1" data-toggle="tab">图片去雾</a>
            </li>
            <li>
                <a style="font-size: large;" href="#choice2" data-toggle="tab">图片去雨</a>
            </li>
        </ul>

        <div id="myTabContent" class="tab-content">
            <div id="choice1">
                <!--初始
                <div class="image-container">
                    <img src="/1.png" alt="图片1" class="p-img">
                    <img src="/2.png" alt="图片2" class="p-img">
                    <div class="uploadimage">
                        <label for="uploadBtn" class="btn">上传图片</label>
                        <input type="file" id="uploadBtn" accept="image/*" onchange="previewFile()">
                        <div id="preview"></div>
                    </div>
                </div>
            -->
                <div class="image-container">
                    <!--删<div class="img background-img"></div>
                    <div class="img foreground-img"></div>-->
                    <img src={{src1}} alt="图片2" class="imgg p-img"><!--!!!!!!!!!!!!class被修改了，可能影响后端-->
                    <img src={{src}} alt="图片1" class="imgg p-img2"><!--new，class也被修改了-->
                    <form action="/dehaze" enctype='multipart/form-data' method='POST'>
                        <input type="file" name="file" style="margin-top:20px;"/>
                        <input type="submit" value="上传" class="button-new" style="margin-top:15px;"/>
                        <input type="hidden" value={{src2}} id='a'>
                    </form>
                    <input
                    type="range"
                    min="1"
                    max="100"
                    value="50"
                    class="slider"
                    name="slider"
                    id="slider"
                  />
                  <!--
                    <div class="slider-button"></div>
                  -->
                </div>
                <!--滑块-->
                <script>
                    const slider = document.getElementById("slider");
                    slider.addEventListener("input", function(e) {
                        document.querySelector(".foreground-img").style.width = e.target.value + "%";
                    });
                </script>
                <!--滑块图标
                <script>
                        const slider = document.getElementById("slider");
                        let sliderPos;
                        slider.addEventListener("input", function(e) {
                            sliderPos = e.target.value;
                            document.querySelector(
                                ".foreground-img"
                                ).style.width = `${sliderPos}%`;
                                document.querySelector(".slider-button"
                                ).style.left = `calc(${sliderPos}% - 18px)`;
                            });
                </script>-->
            </div>

            <div id="choice2">
                <div class="image-container">
                    <img src={{rain1}} alt="图片2" class="imgg p-img"><!--class被修改了，可能影响后端-->
                    <img src={{rain}} alt="图片1" class="imgg p-img2"><!--new，class也被修改了-->
        
                <form action="/derain" enctype='multipart/form-data' method='POST'>
                    <input type="file" name="file" style="margin-top:20px;" />
                    <input type="submit" value="上传" class="button-new" style="margin-top:15px;" />
                    <input type="hidden" value={{src2}} id='b'>
                </form>
                <input
                    type="range"
                    min="1"
                    max="100"
                    value="50"
                    class="slider"
                    name="slider"
                    id="slider"
                  />
                </div>
            </div>
            </div>
        </div>
    </div>
</body>
</html>
